{"version":3,"sources":["FileSaver.min.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.min.js","sourcesContent":["/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\nvar saveAs=saveAs||function(e){\"use strict\";if(typeof e===\"undefined\"||typeof navigator!==\"undefined\"&&/MSIE [1-9]\\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS(\"http://www.w3.org/1999/xhtml\",\"a\"),o=\"download\"in r,a=function(e){var t=new MouseEvent(\"click\");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\\/[\\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s=\"application/octet-stream\",d=1e3*40,c=function(e){var t=function(){if(typeof e===\"string\"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e[\"on\"+t[r]];if(typeof o===\"function\"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,\"writestart progress write writeend\".split(\" \"))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,\"data:attachment/file;\");var n=e.open(t,\"_blank\");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,\"_blank\");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||\"download\",n)};if(typeof navigator!==\"undefined\"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||\"download\";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!==\"undefined\"&&self||typeof window!==\"undefined\"&&window||this.content);if(typeof module!==\"undefined\"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!==\"undefined\"&&define!==null&&define.amd!==null){define(\"FileSaver.js\",function(){return saveAs})}\n","\n\nvar lng = {left: null, right: null},\n\tresult = '',\n\tresultFileName = '',\n\tdropZones = document.getElementsByClassName('drop_zone');\n\nfor (var d in dropZones) {\n\tif (!dropZones[d].addEventListener) continue;\n\tdropZones[d].addEventListener('dragover', handleDragOver, false);\n\tdropZones[d].addEventListener('drop', handleFileSelect, false);\n}\n\ndocument.getElementById('download').addEventListener('click', download, false);\n\n\n\n\nfunction handleFileSelect(evt, opt_encoding) {\n\tevt.stopPropagation();\n\tevt.preventDefault();\n\n\tvar _evt = evt,\n\t\tself = this,\n\t\tfiles = evt.dataTransfer.files,\n\t\tfile = files[0],\n\t\toutput = [],\n\t\ttarget = this.getAttribute('data-target'),\n\t\treader = new FileReader(),\n\t\topt_encoding = opt_encoding || 'utf-8';\n\n\toutput.push(\n\t\t'<strong>', (file.name), '</strong> (', file.type || 'n/a', ', ', opt_encoding,') - ',\n\t\tfile.size, ' bytes, last modified: ',\n\t\tfile.lastModifiedDate ? file.lastModifiedDate.toLocaleDateString() : 'n/a'\n\t);\n\tthis.innerHTML = output.join('');\n\tif (target == 'left')\n\t\tresultFileName = file.name.replace(/\\.srt$/, '.multi.srt');\n\n\treader.onloadend = function(evt) {\n\t\tif (evt.target.readyState == FileReader.DONE) {\n\t\t\tif (evt.target.result.match(/[аиюэоыуеяaeyuio]/ig).length < 100) {\n\t\t\t\thandleFileSelect.call(self, _evt, \"cp1251\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlng[target] = evt.target.result;\n\t\t\tdocument.getElementById(target).textContent = lng[target];\n\t\t\tmerge();\n\t\t}\n\t};\n\treader.readAsText(file, opt_encoding);\n}\n\n\nfunction handleDragOver(evt) {\n\tevt.stopPropagation();\n\tevt.preventDefault();\n\tevt.dataTransfer.dropEffect = 'copy';\n}\n\n\nfunction download() {\n\tvar blob = new Blob([result], {type: \"text/plain;charset=utf-8\"});\n\tsaveAs(blob, resultFileName);\n}\n\n\nfunction merge() {\n\tvar data = {},\n\t\tblock,\n\t\tlng0 = lng.left,\n\t\tlng1 = lng.right,\n\t\tstringDelimiter = '\\r\\n';\n\n\tif (!lng0 || !lng1 || lng0 == \"\" || lng1 == \"\")\n\t\treturn;\n\n\tlng0 = lng0.split(stringDelimiter + stringDelimiter);\n\tlng1 = lng1.split(stringDelimiter + stringDelimiter);\n\n\t// if (lng1.length < lng0.length)\n\t// \tlng0 = [lng1, lng1 = lng0][0];\n\n\tfor (var a = 0; a < lng0.length; a++) {\n\t\tblock = lng0[a].split(stringDelimiter);\n\t\tif (block.length < 3) continue;\n\t\tdata[block[0]] = [block[1].split(\" --> \"), block.splice(2).join(' ')];\n\t}\n\tfor (var b = 0; b < lng1.length; b++) {\n\t\tblock = lng1[b].split(stringDelimiter);\n\t\tif (block.length < 3) continue;\n\t\tblock[1] = block[1].split(\" --> \");\n\t\tfor (a in data)\n\t\t\tif (!(data[a][0][1] < block[1][0] || data[a][0][0] > block[1][1])) {\n\t\t\t\tdata[a].push(block.splice(2).join(' '));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\n\t}\n\n\tresult = [];\n\tfor (a in data) {\n\t\tresult.push(a);\n\t\tresult.push(data[a][0].join(' --> '));\n\t\tresult.push(data[a].splice(1).join(stringDelimiter), '');\n\t}\n\tresult = result.join(stringDelimiter);\n\n\tdocument.getElementById('result').textContent = result;\n\tdocument.getElementById('download_container').removeAttribute('hidden');\n}\n"]}